# 4. Організація роботи зброї

Поведінка та взаємодія зі зброєю реалізована з використанням розподілу логіки по трьом різним класам (скриптам).

## WeaponSO
Цей клас є спадкоємцем ScriptableObject, його зручно використовувати для того, щоб створювати в Unity різні об'єкти, що об'єднані спільними характеристиками та зручно працювати з ними в інтерфейсі Unity-редактора. Також цей клас зберігає внутрішні параметри зброї, такі як шкода за кулю, кількість пострілів у секунду, тощо. Ще цей клас зберігає параметри, які можуть змінюватися по ходу гри, такі як поточна кількість набоїв у магазині.

Крім цього він містить наступні параметри, які змінюються відповідно до конкретного екземпляру зброї:

- ```string name``` - назва зброї в інвентарі.
- ```int weaponID``` - унікальний ідентифікаційний номер зброї.
- ```float damage``` - кількість шкоди, яка завдає одна куля.
- ```float damageSpread``` - максимальний відхил шкоди в обидва боки, ```0``` - шкода завжди буде відповідати значенню damage, ```100``` - якщо значення змінної damage дорівнює ```100```, то підсумкова шкода буде належати інтервалу ```[0, 200]``` та визначатися випадково.
- ```int maxBulletsInMagazine``` - максимальна кількість набоїв у магазині.
- ```int maxAllAmmo``` - максимальна кількість набоїв у інвентарі гравця для даної зброї.
- ```int currentBulletsInMagazine``` - поточна кількість набоїв у магазині.
- ```int allAmmo``` - поточна кількість набоїв у інвентарі гравця для даної зброї.
- ```int bulletsPerShot``` - кількість куль, що вистрілює зброя за один постріл.
- ```float reloadTime``` - час, що витрачається на перезарядку зброї у секундах.
- ```float shotSpread``` - розкид збої при пострілі на 100 метрів.
- ```float shotsPerSecond``` - кількість пострілів у секунду.
- ```float maxShotDistance``` - максимальна відстань ефективного пострілу у метрах.
- ```bool isAutomatic``` - визначає те, чи автоматична зброя (впливає на те, чи можна робити постріли не відтискаючи кнопку пострілу).
- ```AudioClip shotSound``` - звук пострілу.
- ```AudioClip noAmmoSound``` - звук, який програється, коли гравець намагаєтсья зробити постріл, але в магазині немає набоїв.
- ```AudioClip reloadSound``` - звук, який програється при перезарядці зброї.
```bool isReloading``` - визначає те, чи перезаряджається зброя у даний момент.

## Weapon
Цей клас відповідає за внутрішню логіку та поведінку зброї. Містить функції та події які відповідають за постріл, перезарядку, тощо.

```ShotResult``` - ```enum```, що відповідає за відповідь зброї на спробу зробити постріл. Існує декілька варіантів значень цього ```enum'y```, а саме:
- ```NoAmmoInBackpack``` - відсутні набої в інвентарі.
- ```NoAmmoInMagazine``` - відсутні набої у магазині.
- ```ShotSuccesful``` - вистріл виконано успішно.
- ```TooFast``` - пройшло надто мало часу з останнього пострілу.

```TryShoot()``` - метод, який робить спробу пострілу та повертає значення типу ```ShotResult```, після цього клас. ```GunController``` обробляє це значення, та виконує відповідний метод (робить постріл, програє звук перезарядки, тощо).
```Reload()``` - метод, який виконує перезарядку.

## GunController

В цьому класі реалізовані методи, що відповідають за програвання звуків, візуалізацію ефектів та фізичну взаємодію куль та ігрового оточення.
```NoAmmo()``` - метод, що програє звук пострілу коли в магазині немає набоїв.
```Reload()``` - метод, що програє звук перезарядки та викликає метод ```Reload()``` з прив'язаного ```Weapon```.
```Shoot()``` - метод, що програє звук та візуалізує ефекет пострілу, а також завдає шкоду сутностям, з яким взаємодіє куля.
```TryShoot()``` - метод, що викликає метод ```TryShoot()``` з прив'язаного ```Weapon```, і виходячи з поверненого значення викликає вишеперелічені методи.